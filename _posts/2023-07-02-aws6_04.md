---
layout: single
title:  "[CHAP6] 데이터베이스 서비스 - 4"
categories: AWS
---

# 04. 키와 값의 조합으로 데이터 관리

## * 키-값 데이터베이스란

**Amazon DynamoDB**는 key-value형 (키-값) 데이터를 저장하는 데이터베이스  
단순한 데이터 구조이므로 복잡한 검색은 할 수 없지만 고속으로 데이터 추출을 할 수 있음  
키-값이라는 이름에서 유추할 수 있듯이 키의 이름과 그에 대한 값으로 구성된 데이터  
키와 값이 하나의 쌍으로 구성되면 되기 때문에 데이터 형태로는 자유도가 매우 높지만, 관계형 데이터베이스(RDB)처럼 표 형식으로 저장돼 있지 않기 때문에 집계나 검색이 어려움  
키-값 형의 데이터베이스에서는 일련의 데이터를 **레코드**라고 하며 레코드의 각 항목(키와 값)을 **속성**이라고 함  
각 레코드가 고유하게 특정할 수 있는 속성(기본키)을 가지고 있으면 다른 속성은 어떤 것을 가지고 있어도 상관없음  
각 레코드는 기본적으로 기본키로만 검색할 수 있음  


## * DynamoDB 란

DynamoDB는 AWS가 만든 고속 키-값 데이터베이스  
키-값 데이터는 기본적으로 프라이머리 키로만 검색해 데이터를 가져옴, DynamoDB도 내부적으로 프라이머리 키 검색을 쉽게 할 수 있게 데이터를 정리해 보존함  

* 특징
1. 사용자는 레코드의 집합체인 '테이블'을 생성할 뿐 테이블 조작 요청을 모두 DynamoDB가 처리하기 때문에 사용자가 서버 관리를 하지 않아도 됨  
2. 사용자는 **테이블 이름**과 **프라이머리 키**만 지정하면  바로 DynamoDB를 이용할 수 있음  


## * DynamoDB 이용 요금

DynamoDB는 서버리스 서비스이므로 사용자는 데이터의 집합인 **테이블**만 소유하는 형태가 됨  
데이터 보존 스토리지는 테이블의 데이터양에 따라 필요한 크기를 할당받으며 이와 관련된 조작은 DynamoDB가 직접 수행  
이용 요금은 약간 특이한데, 요청을 처리할 양을 예약하고 그 양만큼 요금이 부과됨, 그리고 데이터 보관료가 발생  
처리량은 예약하지 않고 무제한으로도 설정할 수 있음, 무제한으로 설정하는 경우 이용한 만큼 요금이 발생함  
요청 처리량 예약은 '1초에 몇 번, 읽기/쓰기 요청을 받아들일 것인지'를 지정하는 것  
DynamoDB는 예약량을 초과하는 요청에 대해 오류를 반환하지만 Auto Scaling을 사용하면 실제 요청 수에 따라 지정된 범위 내에서 예약량을 자동으로 변경할 수 있음  
또한 처음부터 예약량을 지정하지 않고 발생한 요청을 전부 처리해서 실제로 처리된 요청 수에 따라 요금을 지불할 수도 있음  
처리량은 **커패서티 유닛**으로 불리며 **RCU(Read Capacity Unit)**, **WCU(Write Capacity Unit)**로 표기  
처리량을 예약하는 방식을 **프로비저닝 용량 모드**, 예약하지 않는 방식을 **온디맨드 용량 모드**라고 함  
요청 수를 예측할 수 없는 경우 온디맨드 용량 모드가 편리하지만 요청량이 많으면 예상 이상의 요금이 발생하므로 주의해야 함  


## * DynamoDB 보수

DynamoDB에서 사용자의 소유물은 데이터(테이블)뿐, 데이터를 사용하기 위한 시스템(요청 엔드포인트 및 스토리지)은 AWS가 제공하며  
사용자의 커패서티 유닛이나 데이터 암호화 설정에 따라 알맞게 동작  
따라서 사용자는 테이블 구조 검토나 백업 계획과 같은 데이터 유지보수만 고려하면 됨  
AWS에서는 장애 대비를 위해 DynamoDB 데이터를 이중화하여 저장, 3개의 AZ에 실시간으로 데이터를 복제해 어느 하나의 AZ에 장애가 발생하더라도 문제없이 서비스를 이용할 수 있음  
DynamoDB에는 **특정 시점 복구(PITR)** 라는 실시간 백업 기능이 있음  
PIRT을 활성화하면 지난 **35일** 내 임의의 시점으로 테이블 데이터를 되돌릴 수 있어 갑자기 데이터 손실이 발생해도 대응할 수 있음  
또한 임의의 시점을 지정해 백업을 취득할 수 있음, 수동으로 취득한 백업은 무기한으로 보관할 수 있어 특정 시점의 데이터를 보존하고자 할 때 유용  
DynamoDB는 API를 사용한 조작 외 관리 콘솔에서도 데이터를 표시하거나 편집할 수 있어 쉽게 데이터를 관리할 수 있음, 백업 취득도 클릭 몇 번으로 가능함  


## * DynamoDB 이용 예

DynamoDB는 하루에 10조 건 이상, 초당 2,000만 건 이상의 요청을 고속(0.01초 단위)으로 처리할 수 있음  
이 강점을 살릴 수 있는 모바일, 웹, 게임, 광고, IoT와 같이 데이터 교환이 매우 많고 사용자에게 빠른 응답이 필요한 응용 프로그램에 이용됨  
IoT 기술을 이용한 차량 위치 추적 시스템, 게임 순위 시스템(리더 보드), 웹 광고의 클릭 수 관리 같은 것은 실시간 업데이트와 확인이 필요한 시스템으로 DynamoDB를 사용하기에 좋음  


> 참고 : 그림과 작동 원리로 쉽게 이해하는 AWS 구조와 서비스