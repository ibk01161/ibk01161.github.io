---
layout: single
title:  "[CHAP3] 컴퓨팅 서비스 - 3"
categories: AWS
---

# 03. 가상 서버를 안전하게 외부에 공개

## * 서버 외부 공개

EC2에서 구축한 웹 응용 프로그램을 외부에 공개할 때 몇 가지 추가 설정이 필요함  
공개된 응용 프로그램은 인터넷을 통해 PC나 스마트폰에서 접속해서 사용할 수 있어야 하기 때문에 EC2와 인터넷 간 통로를 설정해야 함  

* EC2를 인터넷에 공개하기 위한 충족해야 하는 조건
1. EC2를 **퍼블릭 서브넷**에 배치
2. **퍼블릭 IP 주소**를 EC2에 부여
3. **보안 그룹**에서 외부로부터의 접근을 허가

**보안 그룹**은 특정 인스턴스가 특정 주소 또는 특정 대역, 전체 인터넷과 통신할 수 있도록 규칙을 만들어 이 규칙에 따라 통신을 제어함  
웹 서비스를 제공할 EC2 인스턴스를 전 세계에 공개하고자 한다면 전 세계에서 80 또는 443번 포트를 이용해 해당 인스턴스로 들어오는 통신을 허가해야 함  


## * 서버 접근 제어

어느 곳에서 어느 곳으로 접속을 허가할지에 대한 접근 제어는 **보안 그룹**을 이용함, 보안 그룹은 온프레미스의 **방화벽** 기능을 수행함  
외부에서 EC2로의 통신을 **인바운드 규칙**으로 정의하고, EC2에서 외부로의 통신을 **아웃바운드 규칙**으로 정의하며 둘 다 통신을 허용할 네트워크와 포트 번호를 지정 함  
포트 번호는 사용하는 통신의 종류에 따라 결정되는데, 리눅스 터미널 접속을 위한 **SSH는 22번 포트**, 웹 접속을 위한 **HTTP는 80번 포트**를 사용함

(인바운드, 아웃바운드 설정 화면 스크린샷)

보안 그룹에 지정하는 규칙은 **허용만 할 수 있다**는 특징이 있음, 특정 네트워크로부터의 통신을 **차단하도록 설정할 수는 없음**  
차단 설정은 네트워크 ACL(Access Control List - 접근 제어 리스트) 이나 접근 제어 기능에서 가능함  
보안 그룹은 EC2 외에도 ECS, RDS와 같이 IP를 가지는 다른 서비스에서도 사용됨, 보안 그룹은 용도마다 따로 생성하고 키-값에 별칭을 잘 입력해 실수하지 않도록 주의해야 함  
또한 불필요한 보안 그룹은 바로 삭제해야 함, 서비스가 많아지면 그만큼 공개해야 할 포트도 많아지고 많은 보안 그룹을 관리하다 보면 사고로 이어질 수 있음  


> 참고 : 그림과 작동 원리로 쉽게 이해하는 AWS 구조와 서비스