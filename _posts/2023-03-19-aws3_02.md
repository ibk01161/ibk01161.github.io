---
layout: single
title:  "[CHAP3] 컴퓨팅 서비스 - 2"
categories: AWS
---

# 02. EC2로 가상 서버를 손쉽게 생성

## * Amazon EC2는 가상 서버 서비스

**EC2**는 몇 분 만에 가상 서버를 생성할 수 있는 서비스다.  
리눅스나 윈도우와 같은 OS는 AWS가 제공하는 것을 선택할 수 있음  
온프레미스에서는 하드웨어 준비부터 OS 설치까지 모두 사용자가 해야 하지만, EC2는 가상 머신을 생성할 때 OS를 함께 설치하므로 사용자는 가상 머신 사용 준비가 완료되면 바로 OS를 사용할 수 있음  
CPU나 메모리와 같은 서버의 사양도 사용자가 자유롭게 선택할 수 있고 머신을 생성한 후에도 변경할 수 있음, 데이터를 저장하는 스토리지의 용량도 쉽게 변경 가능함  
EC2는 가상 서버를 **인스턴스** 단위로 관리함, 사용자가 인스턴스 유형(=가상 서버 사양)을 결정해 생성하면 인스턴스 유형과 이용 기간에 따라 요금이 발생  


## * 가상 서버 생성

* EC2 인스턴스(가상 서버)를 생성하기 위해 설정해야 하는 내용 (인스턴스 생성 화면에서 선택만 하면 됨)
1. Amazon 머신 이미지 (AMI) : OS와 소프트웨어가 설정된 템플릿, 사용자는 제공된 AMI 중 하나를 선택
2. 인스턴스 사양 (인스턴스 유형) : 가상 서버의 성능이 결정, CPU와 메모리 용량이 함께 표시되므로 적절한 유형을 선택
3. 배포할 네트워크 : 가상 머신이 위치할 네트워크는 사용자가 생성한 **VPC**를 선택
4. 데이터를 저장할 스토리지 용량 : 스토리지 용량(**EBS**) 설정
5. 사용 권한 설정 (보안 그룹) : 접근 권한 설정을 위해 **보안 그룹**을 선택

모든 설정을 선택하고 인스턴스를 생성하면 목록에 **실행 중** 상태로 표시됨  
인스턴스를 생성한 후에는 리눅스의 경우 **SSH**, 윈도우는 **원격 데스크톱** 등 관리 시스템 기능을 이용해 연결이 가능 함  
**AWS Systems manager**라는 EC2 인스턴스 관리 서비스가 있으며 이 서비스를 이용해도 인스턴스에 연결할 수 있음


## * 인스턴스 유형으로 서버 성능 결정

인스턴스의 성능은 인스턴스 유형 이름으로 알 수 있음  

* **인스턴스 유형 이름** 규칙 (m6g.medium)
  - m : 패밀리 - 메모리와 CPU 중 어느 것을 우선시 하느냐와 같이 인스턴스의 특징에 따른 문자열
  - 6 : 세대 - 숫자가 클수록 성능이 좋음
  - g : 추가 기능 - Gravition2(CPU 이름)는 g, 네트워크 강화는 n / 추가 기능 문자가 없는 유형도 있음
  - medium : 크기 - 크기가 클수록 고성능, 가격도 크기에 따라 높아짐

* EC2 인스턴스 패밀리

|패밀리|특징|
|:---:|---|
|T|버스트 가능한 범용 유형|
|M|균형 잡힌 범용 유형|
|C|컴퓨팅 최적화 (vCPU 수가 많음)|
|R|메모리 최적화 (메모리 탑재량이 많음)|
|P|고속 컴퓨팅|
|I|스토리지 최적화|

T 유형 인스턴스는 **베이스라인(Baseline)** 이라는 정해진 CPU 사용률이 정의돼 있으며 정의된 사용률을 초과해서(버스트) 이용할 수도 있음  
다만 일정량을 넘으면 베이스라인 이하의 성능이 되거나 추가 요금이 발생하므로 상시 사용이 예상되는 환경에서는 M 유형의 인스턴스를 선택하는 편이 좋음  

온프레미스 환경에서는 기기를 구매하기 전에 기기 사양을 결정해야 하지만,  
클라우드 환경에서는 인스턴스를 생성한 뒤에도 사양을 변경할 수 있으므로 테스트하면서 인스턴스 유형을 결정할 수 있으며 운영 중에도 적절히 변경할 수 있음  


## * 다양한 EC2 요금제

EC2는 이용 시간과 인스턴스 유형에 따라 요금이 발생함, 일반적으로 사용하는 EC2 인스턴스를 **온디맨드 인스턴스** 라고 함  
1년 또는 3년간 요금을 선불로 지불하고 이용하는 **예약 인스턴스** 도 있음  
2019년에는 **절감형 플랜 (Savings Plans)** 이라는 새로운 요금 모델도 등장했음  

* EC2의 이용 용도에 따른 요금제

|구매 유형|특징|이용 용도|
|---|---|---|
|온디맨드|일반 구매 방법, 이용 상황에 따라 요금이 변동|이용 상황에 변화가 있고 사용 예정 일을 모르는 경우|
|예약, Saving Plans|1년 또는 3년간의 이용 요금을 미리 지불, 온디맨드에 비해 최대 72% 할인|프로덕션 가동 등 1년 이상 사용할 예정이 있는 경우|
|스팟|이용하지 않는 부분을 이용, 예기치 않게 인스턴스가 정지될 수 있음, 온디맨드에 비해 최대 90% 할인|개발 환경과 같이 인스턴스를 중단해도 영향이 작은 경우|


## * 그 밖에 EC2 관련 요금

인스턴스 요금 외에도 **네트워크 외부로의 데이터 통신**, **데이터를 저장하는 스토리지 (EBS)** 등에서 요금이 발생함  
대부분 인스턴스 요금에 비해 저렴하지만 많은 데이터를 저장하고 외부와 통신하는 경우는 신경 써야 함  


> 참고 : 그림과 작동 원리로 쉽게 이해하는 AWS 구조와 서비스