---
layout: single
title:  "[CHAP6] 데이터베이스 서비스 - 3"
categories: AWS
---

# 03. 고기능 Aurora의 편리한 특징

## * AWS에 최적화된 데이터베이스

**Amazon Aurora**는 AWS가 클라우드용으로 구축한 데이터베이스, 2014년 출시 직후 MySQL 호환 서비스를 젲공했고, 2017년부터는 PostgreSQL 호환성을 추가  
응용 프로그램에서는 일반적인 MySQL이나 PostgreSQL과 동일하게 사용할 수 있음  
인스턴스 크기를 결정하고 VPC 내에 생성하는 기본적인 부분은 이전에 데이터베이스 엔진과 같음  
Aurora는 **DB 클러스터**라는 단위로 관리되며 처리를 수행하는 하나 이상의 DB 인스턴스와 데이터를 관리하는 **클러스터 볼륨**으로 구성  
클러스터 내의 인스턴스에서 스토리지가 공유되는 것이 특징, 일반 데이터베이스 엔진에서는 EBS가 인스턴스에 연결돼 인스턴스별로 데이터가 관리됨  
클러스터 볼륨은 3개의 AZ에 2개씩 **총 6개의 사본**을 작성해 높은 내결함성을 갖음, 입력 처리는 병렬로 실행되므로 사본을 만들기 위해 처리가 느려지는 일은 없음  
총 6개의 사본이므로 Aurora에서는 **쿼러 모델**이라는 복제 관리(데이터의 복제를 만들어 원본과 별도로 저장하는 것) 구조가 사용되고 있으며  
**쓰기 처리는 6개 중 4개, 읽기 처리는 6개 중 3개**가 성공하면 클라이언트에 성공이라고 반환  


## * AWS에 최적화된 Aurora 기능

Aurora는 구조 차이 외에도 몇 가지 고유 기능이 있음  
일반 RDS는 가용성 향상을 위한 예비 복제와 읽기 성능 향상을 위한 읽기 복제를 준비해야 함(**Aurora 복제**)  
Aurora 복제는 **1개로 가용성 향상과 읽기 성능 향상을 모두 달성할 수 있음**  
Aurora 복제는 평상시에는 읽기 처리를 수행해 읽기 성능 향상을 올리고, 장애가 발생하면 그 즉시 프라이머리 인스턴스로 전환(페일 오버)가 됨  
여러 개의 Aurora 복제를 생성해 읽기 처리를 분산할 수 있음  
응용 프로그램에는 **읽기용 엔트 포인트**의 URL을 지정해 각 복제에 분산 처리를 할 수 있음, 응용 프로그램에서는 1개의 데이터베이스에만 접속하는 것처럼 구성됨  
스토리지도 Aurora가 유리, 일반 RDS 엔진은 디스크 성능 요건에 맞게 스토리지 유형과 확보할 용량(예:100GB)을 사용자가 결정  
Aurora에서는 **스토리지 유형과 용량을 지정할 필요가 없음**, 스토리지 관리는 AWS가 수행  
Aurora의 클러스터 볼륨(스토리지)은 데이터양에 따라 최대 128TB까지 자동으로 증가, 사용자는 여유 공간이나 스토리지 크기 지정으로 고민할 필요 없음  
백업도 Aurora에는 자체 자동 백업 기능이 있음, 이 백업은 설정된 보존 기간만큼 **지속해서 차분 데이터**를 취득  
즉, 보존 기간 내 임의의 시점으로 복원할 수 있음, 보존 기간은 1~35일로 지정할 수 있으며 S3에 저장됨, 기존 보존 기간은 1일이며 0은 백업을 비활성화하는 값임  
다른 RDS에서는 스냅숏+변경 로그 형태로 특정 시점으로 복구하지만 Aurora는 독자적인 기능과 자동 백업(비활성화 불가)으로 복구함  
다른 데이터베이스 엔진과 마찬가지로 스냅숏 기능도 있어 장기간(35일 이상) 백업을 보존할 때 이를 활용할 수 있음  

* Aurora의 다양한 고유 기능
1. 다중 리전에 걸친 글로벌 데이터베이스
2. 두 개의 기본 인스턴스가 있는 멀티 마스터 클러스터
3. 인스턴스 크기 지정이 필요하지 않은 Aurora Serverless
4. S3와 연계한 파일 내보내기, 가져오기 기능

RDS에서 데이터베이스를 만들 때 어떤 데이터베이스 엔진을 선택할지 고민하는 경우가 있는데, AWS에 최적화된 Aurora를 우선적으로 검토하고, Aurora를 사용할 수 없는 환경에서는 다른 RDS를 사용  


> 참고 : 그림과 작동 원리로 쉽게 이해하는 AWS 구조와 서비스