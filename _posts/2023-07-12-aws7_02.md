---
layout: single
title:  "[CHAP7] 보안 관련 서비스 - 2"
categories: AWS
---

# 02. AWS를 안전하게 사용하기 위한 IAM

## * AWS Identity and Access Management란

***AWS Identity and Access Management(IAM)**는 AWS를 사용하는 계정의 권한을 관리하는 서비스  
AWS의 각종 서비스를 사용할 수 있는 사용자를 만들고 해당 사용자에게 '어떤 서비스의 어떤 기능을 사용할 수 있는지'와 같은 권한을 설정할 수 있음  
하지만 권한을 사용자가 아닌 서비스에 부여하거나 일시적으로 권한을 부여하는 등 간단한 권한 관리에 그치지 않는것이 IAM의 특징
**AWS 서비스의 조작 제어는 모두 IAM으로 관리**, 설정 내용은 복잡하지만 서비스의 개요를 이해한다면 대략적인 동작과 사용 방법을 파악할 수 있음  


## * IAM 사용자, IAM 그룹

사용자가 AWS를 조작하기 위해 사용하는 것이 **IAM 사용자**  
비밀번호 등의 인증 정보를 사용해 로그인(인증) 하면 IAM 사용자에게 할당된 권한을 사용(인가)할 수 있음  
IAM 사용자는 관리 콘솔에서 여러 조작을 할 수 있고 **엑세스 키**라는 인증 정보를 발행해 프로그램이나 CLI에서 계정에 부여된 권한을 사용할 수 있음  
**IAM 그룹**을 만들어 그룹에 권한을 설정하고 해당 그룹에 IAM 사용자를 추가하면 IAM 사용자는 해당 그룹에 설정된 권한을 사용할 수 있음  
여러 사용자가 동일한 권한을 갖도록 관리해야 할 때 유용하게 사용할 수 있음  


## * IAM 정책

AWS에서 '어떤 서비스의 기능에 어떤 조작을 할 수 있는지' 와 같은 권한은 **IAM 정책**을 통해 설정할 수 있음  
여러 서비스에 대한 권한 설정을 하나로 묶어 이름을 붙여 정의할 수 있어서 동일한 권한을 설정해야 하는 경우 재사용이 가능  
또한 단일 IAM 사용자, IAM 그룹이나 IAM 역할에 여러 IAM 정책을 연결할 수 있음  
AWS는 수시로 새로운 서비스나 기능을 추가하기 때문에 사람이 매번 추가되는 기능에 권한을 설정하는 것은 어려움, AWS에서는 **AWs 관리형 정책**을 제공  
관리형 정책에는 '모든 서비스 사용 가능', '모든 서비스 참조만 가능', 'S3의 모든 기능 사용 가능'과 같은 정책이 있으며  
서비스나 기능이 추가될 때 자동으로 관련된 권한이 추가되기 때문에 편하게 사용 가능  
보다 강력한 권한 설정을 원한다면 사용자가 직접 IAM 정책을 만들어야 함, 사용자가 만든 IAM 정책을 **고객 관리형 정책**이라고 함  
AWS 서비스와 기능은 매우 많아 고객 관리형 정책의 설정이 어려울 수 있기 때문에 제어를 원하는 항목을 선택해 IAM 정책을 생성할 수 있는 기능을 제공  


## * IAM 역할

IAM 사용자를 생성할 때 **엑세스 키**도 함께 생성할 수 있음, 액세스 키는 CLI로 AWS 자원을 조작하거나 프로그램을 통한 제어를 할 때 사용하는 인증 정보  
가령 Lambda에서 EC2를 실행하는 조작을 해야 한다면 Lambda 프로그램에서 액세스 키를 이용해 AWS 계정의 권한을 위임 받아 EC2를 실행  
하지만 액세스 키는 고정 문자열이며, AWS 계정과 동일한 권한을 가지고 있기 때문에 유출될 경우 보안 위협에 노출될 수 있음  
따라서 AWS 서비스에 권한을 부여할 때는 **IAM 역할**을 사용하는 것이 좋음  
IAM 역할을 사용하면 일반적으로 조직의 AWS 리소스에 대한 액세스 권한이 없는 사용자나 서비스에 액세스 권한을 위임할 수 있음  
IAM 사용자나 AWS 서비스는 AWS API 호출을 수행하는데 사용할 수 있는 '임시 보안 자격 증명'을 휙득할 수 있는 권한을 맡을 수 있음  
사용자에게 권한을 부여하는 것이 아니라 '서비스'에 해당 서비스를 사용할 수 있는 '서비스'를 지정하는 것이기 때문에 더 안전하게 서비스를 사용할 수 있음  
AWS에서는 시스템을 구축할 때 구축하는 시스템별로 AWS 계정을 분리할 것을 권장하고 있음, 환경, 관리, 청구의 분리를 통해 계정을 더 안전하고 효율적으로 관리하기 위한 것  
각 AWs 계정에는 IAM 사용자로 로그인하는데, AWS 계정이 많아지면 IAM 사용자를 관리하기 어려워짐  
따라서 각 AWS 계정에 사용자 역할별 IAM 역할만 생성하고 IAM 사용자가 필요한 때만 역할을 부여해 적절한 권한으로 작업할 수 있게 설정할 수 있음  
이를 **Role Switch(역할 변경)**라고 하며 이 기능을 이용해서 여러 AWS 계정에 존재하는 IAM 사용자 관리를 간단히 할 수 있음  


> 참고 : 그림과 작동 원리로 쉽게 이해하는 AWS 구조와 서비스