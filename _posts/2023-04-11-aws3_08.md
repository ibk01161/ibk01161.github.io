---
layout: single
title:  "[CHAP3] 컴퓨팅 서비스 - 8"
categories: AWS
---

# 08. ECS로 누리는 컨테이너의 장점

## * AWS의 컨테이너 오케스트레이션 서비스

AWS에서 컨테이너 시스템을 구축하는 경우 일반적으로 **Amazon Elastic Container Service(ECS)** 와 **Amazon Elastic Kubernetes Service(EKS)** 라는 두 가지 서비스 중 선택할 수 있음  
두 서비스의 가장 큰 차이점은 컨테이너 오케스트레이션 기능을 AWS가 담당하느냐, 쿠버네티스(Kubernetes) 가 담당하느냐 이다.  
**ECS**는 AWS의 관리형 컨테이너 오케스트레이션 서비스임  
컨테이너 오케스트레이션 도구를 구축하고 관리하기 위해 많은 노력과 시간이 드는데, 이 부분을 AWS에 모두 맡길 수 있음  
**Amazon Elastic container Registry(ECR)** 라는 컨테이너 이미지 레지스트리 서비스도 제공함, 이를 이용하면 사용자 정의된 컨테이너 이미지를 AWS에서 관리할 수 있고 ECS에도 쉽게 배포할 수 있음  


## * EC2와 Fargate

ECS를 이용해 컨테이너를 기동할 때 어떤 플랫폼에서 시작할지 선택할 수 있음, 선택 가능한 플랫폼은 **EC2** 와 **AWS Fargate** 임  
EC2는 EC2인스턴스 내에서 실행되는 컨테이너 런타임에서 컨테이너를 실행하는 타입, 이 경우 사용자가 컨테이너 런타임이 설치된 서버(EC2) 를 관리해야 함  
반대로 Fargate는 AWS에서 관리하는 서버에서 컨테이너를 실행함  
Fargate는 컨테이너 런타임, OS 버전업과 같은 서버 관리를 AWS에서 하므로 사용자는 컨테이너 이미지만 관리하면 됨  
서버의 컨테이너 런타임, OS와 같은 버전은 **플랫폼 버전(PV)** 으로 관리되므로 Fargate를 실행할 때 이 PV를 지정해야 함, PV는 1년 단위로 갱신되며 사용자는 버전 업데이트에 따른 대응을 해야 함  
노드(컨테이너를 실행하는 서버) 에서 할당하는 하드웨어 자원의 할당 방법도 차이가 있음  
EC2의 경우 CPU/메모리를 늘리고 싶다면 인스턴스 타입을 적절한 것으로 변경하고, 스토리지를 늘리고 싶다면 스토리지(EBS)의 볼륨 크기를 확장하면 됨  
Fargate는 CPU와 메모리를 직접 할당할 수 없지만, 지정한 CPU 값에 따라 할당할 수 있는 메모리 크기가 정해져 있음  
스토리지는 사전에 Fargate 태스크 스토리지로 태스크 실행 시 할당 되며 할당량은 PV에 따라 다름  


## * Fargate 장점

Fargate의 주요 특징은 AWS에서 서버를 관리함  
EC2에서 컨테이너를 실행하면 OS 설정은 물론 컨테이너 런타임 관리, 보안 패치 등 정기적인 유지보수가 필요하지만  
Fargate를 이용하면 이러한 유지보수 작업은 AWs에서 담당하므로 편하게 ECS를 사용할 수 있음  
Fargate를 이용하면 컨테이너가 이용하는 자원량에 따라 Fargate 전용 요금을 지불함  
Fargate가 약간 비싸지만 서버 측의 관리 비용을 줄일 수 있다는 이점을 고려하면 우려할 만큼 요금이 비싸지는 않음  


## * 쿠버네티스를 보다 쉽게 사용할 수 있는 서비스

AWS의 컨테이너 오케스트레이션 서비스로는 ECS와 **쿠버네티스(Kubernetes)**를 사용할 수 있는 EKS(Elastic Kubernetes Service)가 있음  
쿠버네티스는 구글에서 개발한 컨테이너 오케스트레이션 도구임  



> 참고 : 그림과 작동 원리로 쉽게 이해하는 AWS 구조와 서비스