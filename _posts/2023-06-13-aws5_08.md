---
layout: single
title:  "[CHAP5] 네트워크 및 콘텐츠 전송 서비스 - 8"
categories: AWS
---

# 08. CloudFront로 빠르고 안정적인 서비스 제공

## * CloudFront란

**Amazon CloudFront(CloudFront)**는 AWS가 제공하는 **콘텐츠 전달 네트워크(CDN)** 서비스  
CDN은 동영상 파일과 같은 대용량 디지털 콘텐츠를 인터넷에서 효율적으로 사용자에게 전달하기 위한 네트워크를 말함  
CDN은 데이터 본체를 저장하고 있는 **원본 서버(Origin Server)**에서 그 데이터의 **복사본(캐시)**을 세계에 존재하는 캐시 서버에 저장함  
CDN은 사용자의 위치를 파악해 자동으로 가장 가까운 곳에 있는 캐시 서버로 연결해 사용자가 빠르게 데이터를 취득할 수 있게 함  
Route 53의 라우팅 정책 중 하나인 **지리적 위치 라우팅**과 같은 개념을 사용함  
CloudFront는 캐시 서버를 전 세계 **엣지 로케이션**에 배치하고 AWS가 가진 네트워크를 통해 AWS 리전에 기능을 제공  
엣지 로케이션은 리전별 중간층을 포함하면 47개국 90개 이상의 도시에 275개 이상 존재해 전 세계에 CDN 서비스를 제공할 수 있음  


## * CloudFront의 장점

1. 대용량 콘텐츠의 빠른 배포
전 세계에 구축된 CDN이므로 동영상 및 온라인 게임과 같은 대용량 콘텐츠를 전 세계 사용자에게 효율적으로 전달할 수 있음  

2. 보안 향상
CloudFront를 적용한 서비스는 자동으로 통신의 SSL/TLS 암호화를 수행, CludFront에는 기본적으로 자동으로 생성된 도메인 이름이 할당되며 해당 도메인 이름을 가진 인증서가 설정됨  
또한 AWS Shield라는 무료 DDoS 보호 서비스도 자동으로 적용돼 DDoS 공격에 대처할 수 있음  
이런 보안 조치는 CloudFront가 기본으로 제공하므로 CloudFront를 적용하는 것만으로도 보안을 개선할 수 있음  

3. 가용성 향상
CloudFront는 전 세계에 **엣지 로케이션**을 가지고 있으며 대상 데이터의 캐시를 저장하고 있음  
콘텐츠 전송이 엣지 로케이션으로 이루어지므로 원본 서버에 대한 부하가 **분산**돼 결과적으로 **가용성 향상**으로 이어지게 됨  
원본 서버에서 장애가 발생했을 때의 동작도 설정할 수 있어 더욱 유연한 서비스를 제공할 수 있음  


## * CloudFront 설정

실제 CloudFront 관리 콘솔에서 사용할 수 있는 기능들

1. 배포
CloudFront는 원본 서버에 배치된 파일에 대한 정보를 **배포(Distribution)**라는 단위로 취급, EC2는 인스턴스 단위로 가상 서버를 다루듯이 CloudFront에서는 배포 단위로 정보를 관리하는 것  
하나의 배포에 하나의 CloudFront 도메인이 할당되며 다양한 설정을 할 수 있음, CloudFront는 사용자가 이 전용 도메인에 접속하면 엣지 로케이션을 통해 통신하도록 함  
'일반' 설정에서는 엑세스 로그 출력 설정을 비롯한 배포의 기본적인 설정을 함  
**AWs WAF**의 설정은 AWS Shield와 닫ㄹ리 사용료가 부과되지만 CloudFront에 AWS WAF를 설정하면 사용자가 보내는 모든 요청이 CludFront의 엣지 로케이션에 도달하기 전에 AWS WAF가 보안 규칙에 따라 걸러지기 때문에 안전한 서비스를 제공할 수 있음  

2. '원본' 설정
'원본' 설정은 콘텐츠의 원래 데이터가 저장되는 원본이 되는 자원에 대해 설정, 도메인 단위로 설정할 수 있으며 AWS자원은 S3나 ELB 등을 대상으로 할 수 있음  
자신이 관리하는 도메인도 지정가능, CloudFront가 원본에 접근할 때 부여하는 헤더 정보도 설정할 수 있음  

3. 기타 설정
추가로 다음 표와 같이 설정해 성능을 개선하고 가용성을 향상할 수 있음  

|설정 항목|설명|
|---|---|
|동작|CloudFront에서 사용할 수 있는 프로토콜 및 HTTP 방법 설정, 캐시 설정을 수행 <br> '*.mp4'와 같이 웹 서비스에서 사용되는 경로 패턴 단위로 제어 <br> 캐시 정책에서 상세한 캐시 설정을 할 수 있음|
|오류 페이지|원본에서 장애가 발생했을 때의 동작 설정 가능 <br> HTTP 오류 코드별 응답 정의 <br> '동작' 설정과 조합해 에러가 발생했을 때의 동작을 설정|
|지리적 제한|특정 위치로부터의 접속을 허가 또는 차단하는 설정|
|무효화|CloudFront에서 캐시를 수동으로 삭제할 때 사용|

'오류 페이지' 설정과 '동작' 설정을 조합해 원본 서버에서 오류가 발생했을 때 특정 에러 페이지를 표시하도록 설정하는 등 서비스를 사용자 친화적으로 구성할 수 있음  


## * CloudFront 이용료

CloudFront는 다른 많은 서비스와 마찬가지로 종량 과금제  
통신이 발생하는 지역에 따라 요금이 조금씩 다르지만 기본적으로 CloudFront를 실제로 사용한 데이터 전송량과 CloudFront에 대한 요청 수에 따라 요금이 결정됨  


> 참고 : 그림과 작동 원리로 쉽게 이해하는 AWS 구조와 서비스