---
layout: single
title:  "[CHAP7] 보안 관련 서비스 - 5"
categories: AWS
---

# 05. AWS 작업 내용 감시

## * 지능형 위협 탐지 서비스 Amazon GuardDuty

**Amazon GuardDuty**는 AWS 계정 내의 모든 활동을 감시하는 **위협 탐지 서비스**  
한 번의 클릭으로 서비스를 활성화하고 AWS 계정의 보안 상태를 즉시 분석할 수 있음, AWS 계정을 생성한 뒤 바로 서비스를 활성화하는 것이 좋음  
탐지 시스템은 AWS가 제공하므로 사용자는 탐지된 내용을 확인하고 대응하면 됨  

* 탐지 내용 예
1. 루트 사용자 사용
2. IAM 액세스 키가 대량으로 사용됨
3. EC2가 DDoS 공격(분산 서비스 거부 공격)을 위한 좀비 PC가 됐을 가능성

**Guardduty**는 CloudTrail, VPC 흐름 로그 및 DNS Logs의 세 가지 정보를 기반으로 탐지를 수행함  
여기에 포함되지 않는 EC2에서 실행되는 응용 프로그램이나 Lambda 함수에서 발생하는 위협 이벤트는 탐지할 수 없음  
**기계 학습으로 이용 패턴을 학습**해 루트 사용자로 로그인하는 행위를 탐지하거나 IAM 사용자가 평소와는 다른 사용 패턴으로 콘솔 조작을 하는 경우도 탐지할 수 있음  
GuardDuty를 활성화하면 위협 탐지 상태를 화면으로 바로 확인할 수 있음, 하지만 이것만으로는 실시간으로 탐지를 수행할 수 없음  
실시간으로 탐지를 수행해 알림을 발송하기 위해 AWS Config에서 소개한 것처럼 Amazon EventBridge와 Amazon SNS를 함께 이용해야 함  
GuardDuty가 현재 어떤 이벤트를 탐지하는지, 어떤 동작을 하는지와 같은 구체적인 탐지 정보는 화면에 표시되지 않아 확인할 수 없음  
탐지 내용을 확인하고 싶다면 샘플 이벤트를 이용해야 함, GuardDuty에는 탐지 내용을 확인하기 위한 **샘플 이벤트**를 제공하므로 이를 이용해 설정이 올바르게 됐는지 확인함  

* 탐지에 사용되는 각 서비스
|항목|요금(서울 리전)|
|---|---|
|CloudTrail 관리 이벤트|이벤트 1백만 건당 4.60USD|
|CloudTrail S3 데이터 이벤트|이벤트 1백만 건당 0.90USD|
|VPC 흐름 로그, DNS 로그|GB당 1.15USD|

요금은 이벤트 수와 로그 발생량에 따라 다르지만 일반적으로 GuardDuty 요금이 높아져 문제가 되는 경우는 없음  


> 참고 : 그림과 작동 원리로 쉽게 이해하는 AWS 구조와 서비스