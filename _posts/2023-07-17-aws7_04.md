---
layout: single
title:  "[CHAP7] 보안 관련 서비스 - 4"
categories: AWS
---

# 04. 설정 내역 및 설정 내용을 자동으로 관리

## * 설정 이력을 저장하는 AWS Config

**AWS Config**는 EC2 인스턴스나 보안 그룹과 같은 AWS 자원에 대한 구성 정보와 변경 이력을 남기는 서비스  
관리 콘솔에서 AWS Config를 활성화하기만 하면 자동으로 AWS 자원의 구성 정보를 수집하고 이력을 관리할 수 있음, 기본적으로 7년 치의 정보를 저장  
CloudTrail은 계정의 활동 이력을 저장하지만 AWS Config는 **AWS 자원의 설정 내용 기반**으로 이력을 저장, 둘 다 중요한 이력 정보이므로 AWS 계정 생성 후 기본적으로 활성화 하는게 좋음  
이력 정보가 남아있으면 문제가 발생해도 이력을 확인해 대응할 수 있음  
특히 보안과 관련한 사고는 설정 변경으로 인해 발생하는 경우가 많아 보안 사고가 발생한 시점의 변경 이력을 확인하면 어떤 이유로 사고가 발생했는지도 특정할 수 있음  
**고급 쿼리** 라는 기능을 이용해 특정 자원 수를 확인할 수 있음  

```
SELECT configuration.instanceType, COUNT(*)
WHERE resourceType = 'AWS::EC2::Instance'
GROUP BY configuration.instanceType
```
=> 인스턴스 종류별 EC2의 수를 확인하는 쿼리  
AWS Config 요금은 하나의 설정 항목당 0.003USD로 저렴하지만 자원 수가 늘어나면 사용료도 증가하므로 주의  
특정 자원 유형을 지정해 이력 정보를 남기는 것도 가능하니 요금을 줄이고 싶다면 자원 유형을 지정해 필요한 자원에 대해서만 이력을 남기는 것도 좋은 방법임  


## * 설정을 확인하는 AWS Config 규칙
  


> 참고 : 그림과 작동 원리로 쉽게 이해하는 AWS 구조와 서비스